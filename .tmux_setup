#!/bin/bash

tmux new-window
tmux select-window -t 2
tmux split-window -h
tmux split-window -h
tmux split-window -h
tmux split-window -h
tmux split-window -h
#tmux select-layout main-vertical
tmux select-layout "4f0d,125x31,0,0{71x31,0,0,87,53x31,72,0[53x5,72,0,88,53x5,72,6,89,53x5,72,12,90,53x5,72,18,91,53x7,72,24,92]}"

tmux send-keys -t 1 -l vim
tmux send-keys -t 1 Enter

tmux send-keys -t 2 -l 'vagrant ssh'
tmux send-keys -t 2 Enter
sleep 5
tmux send-keys -t 3 -l 'vagrant ssh'
tmux send-keys -t 3 Enter
sleep 5
tmux send-keys -t 4 -l 'vagrant ssh'
tmux send-keys -t 4 Enter
sleep 5

tmux send-keys -t 2 -l 'cd /vagrant'
tmux send-keys -t 2 Enter
sleep 1
tmux send-keys -t 3 -l 'cd /vagrant'
tmux send-keys -t 3 Enter
sleep 1
tmux send-keys -t 4 -l 'cd /vagrant'
tmux send-keys -t 4 Enter
sleep 1

# spin up docker containers
tmux select-pane -t 2
tmux send-keys -t 2 -l '\
  ./docker/compose/ldg-compose kill && \
  ./docker/compose/ldg-compose rm -f && \
  ./docker/compose/ldg-compose \
    -c "docker.dev.analytics.ldgrc" up \
'
tmux send-keys -t 2 Enter
sleep 5

# start python shell
tmux select-pane -t 3
tmux send-keys -t 3 -l '\
  python modules/django/dashboard/manage.py shell \
'
tmux send-keys -t 3 Enter
sleep 5

# start frontend build
tmux send-keys -t 6 -l 'gulp dev'
tmux send-keys -t 6 Enter
sleep 5

